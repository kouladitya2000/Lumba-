Resources
| where type in~ (
    'microsoft.compute/virtualmachines',
    'microsoft.sqlvirtualmachine/sqlvirtualmachines'
)
| join kind=leftouter (
    ResourceContainers
    | where type == 'microsoft.resources/subscriptions'
    | project subscriptionId, managementGroupId
) on subscriptionId
| project
    name,
    id,
    type,
    subscriptionId,
    managementGroupId,
    resourceGroup
