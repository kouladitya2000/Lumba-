$response = $null

try {
    $response = $client.GetAsync($uri).GetAwaiter().GetResult()
    Write-Host "Request completed."
}
catch {
    Write-Host "GetAsync threw an exception:"
    Write-Host $_.Exception.Message
    throw
}

if ($null -eq $response) {
    throw "Response is NULL after GetAsync."
}

Write-Host "Status Code: $($response.StatusCode)"

$content = $response.Content.ReadAsStringAsync().GetAwaiter().GetResult()

Write-Host "Content length: $($content.Length)"
